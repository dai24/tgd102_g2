<!DOCTYPE html>
<html lang="en">
    @@include('./layout/head.html',{
        "title" : "學生會員-編輯個人資料"
    })
<body>
    @@include('./layout/header.html')
    
    <div class="companyEditWrapper">
        <div class="companyEditTitle">
            <h3>會員資訊</h3>
        </div>
        <table id="table">     
            <tbody>
                <tr class="item">
                    <td class="id"><h3>會員名稱</h3></td>
                    <td class="detail"><h3 class="para">林立人</h3><textarea type="text"  class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

                <tr class="item">
                    <td class="id"><h3>手機</h3></td>
                    <td class="detail"><h3 class="para">0988274578</h3><textarea type="text"  class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

                <tr class="item">
                    <td class="id"><h3>電子郵件</h3></td>
                    <td class="detail"><h3 class="para">dsfvvfe@gmail.com</h3><textarea type="text" class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

                <tr class="item">
                    <td class="id"><h3>性別</h3></td>
                    <td class="detail"><h3 class="para">男</h3><textarea type="text"  class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

                <tr class="item">
                    <td class="id"><h3>生日</h3></td>
                    <td class="detail"><h3 class="para">1994/10/20</h3><textarea type="text"  class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

                <tr class="item">
                    <td class="id"><h3>密碼</h3></td>
                    <td class="detail"><h3 class="para">this54684</h3><textarea type="text"  class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

                <tr class="item">
                    <td class="id"><h3>通訊地址</h3></td>
                    <td class="detail"><h3 class="para">台北市信義區松仁路97號</h3><textarea type="text"  class="area"></textarea></td>
                    <td class="editIcon"><i class="fa-solid fa-pen"></i></td>
                </tr>

            </tbody>
        </table>

        <div>
            <input type="submit" class="btna17 save" value="儲存" name="submit">
        </div>
    </div>
    @@include('./layout/footer.html')
    <script src="./js/student_edit.js"></script>
    <script>
        let editIcon = document.getElementsByClassName('fa-solid fa-pen')

        for(let i = 0; i < editIcon.length; i++){
            editIcon[i].addEventListener('click', function(e){
                let areaEdit = e.target.parentNode.parentNode.children[1].lastChild
                let paraTextFirst = e.target.parentNode.parentNode.children[1].firstChild
                console.log(paraTextFirst);
                console.log(this);
                let editIconThis = this
                if(areaEdit.classList.contains('on')){
                    console.log(this);
                    areaEdit.classList.remove("on")
                    editIconThis.style.color='black'
                    areaEdit.style.display = 'none'
                    paraTextFirst.style.display = 'block'
                }else{
                        editIconThis.style.color='#EAA565'
                        areaEdit.classList.add("on")
                        let codePath = document.getElementsByClassName('area');
                        paraTextFirst.style.display = 'none'
                        areaEdit.style.display = 'block'
                        areaEdit.value = paraTextFirst.innerText
                        for(let i = 0; i < codePath.length; i++){
                            let para = document.getElementsByClassName('para');
                            codePath[i].addEventListener('input', function(){
                                this.style.height = 'auto';
                                this.style.height = `${this.scrollHeight}px`;
                            })
                            codePath[i].addEventListener('blur', function(e){
                                console.log('123');
                                editIconThis.style.color='black'
                                let paraText = e.target.parentNode.children[0]
                                paraText.innerText = codePath[i].value
                                codePath[i].style.display = 'none'
                                paraTextFirst.style.display = 'block'
                                codePath[i].classList.remove("on")
                            })
                            codePath[i].addEventListener('keyup', function(e){
                                if(e.which == '13'){
                                    console.log('123');
                                    editIconThis.style.color='black'
                                    let paraText = e.target.parentNode.children[0]
                                    paraText.innerText = codePath[i].value
                                    codePath[i].style.display = 'none'
                                    paraTextFirst.style.display = 'block'
                                    codePath[i].classList.remove("on")
                                }
                            })
                            

                        }
                    }
                    
            })
        }
    </script>
</body>
</html>