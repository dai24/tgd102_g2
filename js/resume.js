

// // 履歷範本放大
// let resume_zoome_window = `
// <div class="m-a-s-k"></div>
// <div class="resume_zoom">
//    <button class=""><i class="fa-solid fa-xmark"></i></button>
//    <img src="">
// </div> 
// `

// 儲存視窗
// let resume_save_window = `
// <div class="m-a-s-k"></div>
// <div class="card_resume resume_window">
//    <ul class="cardUl">
//       <li>
//          <h1 class="cardH1">儲存</h1>
//       </li>
//       <li>
//          <i class="fa-solid fa-xmark cardXmark"></i>
//       </li>
//    </ul>
//    <div class="cardInner applyfor">
//       <div class="applyTitle">
//          <div class="messageTitleMain">
//             <h3>儲存成功</h3>
//             <h3>要到會員的我的履歷檢視嗎？</h3>
//          </div>
//       </div>
//       <div class="btna3 check_btn">確定</div>
//    </div> 
      
//    </div>
// `
// 模板付費視窗
// let resume_pay_window = `
// <div class="m-a-s-k"></div>
// <div class="card_resume resume_window">
//    <ul class="cardUl">
//       <li>
//          <h1 class="cardH1">金幣不足</h1>
//       </li>
//       <li>
//          <i class="fa-solid fa-xmark cardXmark"></i>
//       </li>
//    </ul>
//    <div class="cardInner applyfor">
//       <div class="applyTitle">
//          <div class="messageTitleMain">
//                <h3>A01模板需100金幣</h3>
//          </div>
//       </div>
//          <div class="btna3 addpay">確定加值</div>
//    </div>
// </div>
// `
// // 付費方案視窗
// let resume_payplan_window = `
// <div class="m-a-s-k"></div>
// <div class="card_resume  resume_window">
//         <ul class="cardUl">
//             <li>
//                <h1 class="cardH1">加值點數</h1>
//             </li>
//             <li>
//                <i class="fa-solid fa-xmark cardXmark"></i>
//             </li>
//         </ul>
//         <div class="cardInner payplan">
//             <div class="applyTitle">
        
//                 <div class="applyTitle_main">
//                     <input type="radio" name="123">
//                     <h2>NT 399</h2>
//                     <img src="images/header_icon/money.png" alt="">
//                     <h2>200金幣</h2>
//                 </div>
//                 <div class="applyTitle_main">
//                     <input type="radio" name="123">
//                     <h2>NT 899</h2>
//                     <img src="images/header_icon/money.png" alt="">
//                     <h2>500金幣</h2>
//                 </div>
//                 <div class="applyTitle_main">
//                     <input type="radio" name="123">
//                     <h2>NT 1599</h2>
//                     <img src="images/header_icon/money.png" alt="">
//                     <h2>1000金幣</h2>
//                 </div>
//             </div>
//             <div class="btna3 payplan_btn">確定</div>
//         </div>
// </div>`

// 刪除視窗
// let resume_delete_window = `
// <div class="m-a-s-k"></div>
// <div class="card_resume resume_window">
//    <ul class="cardUl">
//       <li>
//          <h1 class="cardH1">刪除</h1>
//       </li>
//       <li>
//          <i class="fa-solid fa-xmark cardXmark"></i>
//       </li>
//    </ul>
//    <div class="cardInner applyfor">
//       <div class="applyTitle">
//          <div>
//             <i class="fa-regular fa-circle-check"></i>
//          </div>
//          <div class="messageTitleMain">
//             <h3>確定刪除履歷嗎？</h3>
//          </div>
//       </div>
//       <div class="btna3 delete_btn">確定</div>
//    </div>
// </div>
// `

// //分享視窗
// // let resume_share_window = `
// <div class="m-a-s-k"></div>
// <div class="card_resume resume_window">
//         <ul class="cardUl">
//             <li>
//                 <h1 class="cardH1">分享您的履歷</h1>
//             </li>
//             <li>
//                 <i class="fa-solid fa-xmark cardXmark"></i>
//             </li>
//         </ul>
//         <div class="cardInner shareresumeform ">
//             <div class="applyTitle">
//                 <select name="" id="shareresumeform_select"><option value="設計">請選擇履歷種類</option>
//                     <option value="工程">工程</option>
//                     <option value="管理">管理</option>
//                     <option value="媒體">媒體</option>
//                     <option value="銷售">銷售</option>
//                     <option value="金融">金融</option>
//                     <option value="行政">行政</option>
//                     <option value="科技">科技</option>
//                     <option value="服務">服務</option>
//                 </select>    
//             </div>
//             <div class="shareresumeform_1">
//                 <input type="radio">
//                 <i class="fa-solid fa-earth-asia"></i>
//                 <span>公開 網站上的人都可以找到並檢視。</span>
//                 <div class="share_ig_fb">
//                     <h3>分享至</h3>
//                     <a href="#"><img src="./images/careertest//icon_instagram.svg" alt="IG"></a>
//                     <a href="#"><img src="./images/careertest//icon_facebook.svg" alt="臉書"></a>
//                 </div>
//                 <div class="btna3 check_btn">確定</div>
//             </div>
//         </div>
//     </div>
// `

// pdf下載視窗
// let resume_pdf_window = `
// <div class="m-a-s-k"></div>
// <div class="card_resume  resume_window">
//         <ul class="cardUl">
//             <li>
//                 <h1 class="cardH1">您的履歷 PDF 已就緒</h1>
//             </li>
//             <li>
//                 <i class="fa-solid fa-xmark cardXmark"></i>
//             </li>
//         </ul>
//         <div class="cardInner applyfor">
//             <div class="applyTitle">
//                 <div>
//                     <i class="fa-solid fa-file-circle-plus"></i>
//                 </div>
//                 <div class="deleteTitleMain">
//                     <h3>新鮮人履歷.pdf</h3>
//                 </div>
//             </div>
//             <div class="btna3 check_btn pdf_dowload">下載 PDF</div>
//         </div>
//     </div>
// `

// 

$(function () {

   // // 履歷範本分類按鈕
   // $('.btna13').on('click', function () {
   //    $('.btna13').css('background-color', 'rgba(255, 255, 255, 0)').css('color', '#313131')
   //    $(this).css('background-color', '#EAA565').css('color', '#FFFFFF')

   // })

   // 履歷範本放大
   // $('.resume_zoom_btn').on('click', function () {
   //    $('.resume_wrapper').append(resume_zoome_window)
   //    let img_src = $(this).parents('.resume_card').children("img").attr('src')
   //    $('.resume_zoom img').attr('src', img_src)
   //    $('.m-a-s-k').show()

   //    // 履歷範本放大關閉
   //    $('.resume_zoom .fa-xmark').on('click', function () {
   //       // $('.resume_zoom').remove()
   //       // $('.m-a-s-k').remove()
   //       closeWindows()
   //    })

   // })


   // 打開關閉履歷模組視窗
   // $('#resume_model-btn').on('click', function () {
   //    $('.resume_model-border').toggle('blind', { percent: 50 }, 500)

   // })

   // RWD 關閉履歷模組視窗
   // $('.xmark_btn').on('click', function () {
   //    $('.resume_model-border').toggle('blind', { percent: 50 }, 500)

   // })

   // 頁碼
   $('.pagination-ul a').on('click', function () {
      $('.pagination-ul a').css('color', '#313131')
      $(this).css('color', '#EAA565')
   })

   // 模板付費視窗
   // $('.resume_model-border .resume_pay').on('click', function () {
   //    $('.resume_wrapper').append(resume_pay_window)
   //    $('.fa-xmark').on('click', function () {
   //       closeItem()
   //    })
   //    // 儲值視窗
   //    $('.addpay').on('click', function () {
   //       $('.resume_wrapper').append(resume_payplan_window)
   //       $('.fa-xmark,.payplan_btn').on('click', function () {
   //          closeItem()
   //       })
   //    })
   // })



   // 儲存履歷視窗
   // $('#resume_save').on('click', function () {
   //    $('.resume_wrapper').append(resume_save_window)
   //    $('.m-a-s-k').show()
   //    $('.fa-xmark').on('click', function () {
   //       closeItem()
   //    })
   //    closeWindows()
   // })

   // 分享履歷視窗
   // $('#resume_share').on('click', function () {
   //    $('.resume_wrapper').append(resume_share_window)
   //    $('.m-a-s-k').show()

   //    closeWindows()
   // })

   // pdf下載視窗
   // $('#resume_pdf_dowload').on('click', function () {
   //    $('.resume_wrapper').append(resume_pdf_window)
   //    $('.m-a-s-k').show()

   //    closeWindows()
   // })

   // pdf_dowload 下載
   // $('.pdf_dowload').on('click', function () {
   //    window.print();
   // })

   // 刪除履歷視窗
   // $('#resume_delete').on('click', function () {
   //    $('.resume_wrapper').append(resume_delete_window)
   //    $('.m-a-s-k').show()

   //    $('.fa-xmark').on('click', function () {
   //       closeItem()
   //    })
   //    $('.delete_btn').on('click', function () {
   //       $('.work_space_a4').hide()
   //       closeItem()
   //    })

   // })

   // 刪除編輯的履歷
   // $('.resume_model').on('click', function () {
   //    $('.work_space_a4').show()
   // })

   

   // Avatar_upload()
   
  
})


// 關閉跟確認視窗
// function closeWindows() {
//    $('.resume_window .fa-xmark,.resume_window,.resume_window .check_btn,.resume_zoom').on('click', function () {
//       closeItem()

//    })
// }

// function closeItem() {
//    $('.resume_zoom').remove()
//    $('.resume_window').remove()
//    $('.m-a-s-k').remove()
// }

// function Avatar_upload(){
//    let upload = document.querySelector('#upload');
//    let Avatar = document.querySelector('.work_space_a4_2 img')
//    let upload_img = document.querySelector('.work_space_a4_2 .fa-file-circle-plus')
//    upload.addEventListener('change', (e) => {
//       let readFile = new FileReader()
//       readFile.readAsDataURL(upload.files[0])
//       readFile.addEventListener('load', function () {
//          Avatar.src = readFile.result;
//          Avatar.style.display = 'block';
//          upload_img.style.display = 'none'

//       })

//    })
// }

// 履歷範本
Vue.component('my-pagination',{
   data() {
       return {
           // clickColor: false,
       }
   },
   methods:{
       // paginationClick(){
       //     this.clickColor = true
       // }
   },
   computed:{
       // color(){
       //     return {
       //         paginationColor : true
       //     }
       // },
       // Clickcolor(){
       //     return {
       //         paginationClickColor : true
       //     }
       // }
   },
   template:
   `
   <div class="pagination-div">
       <ul class="pagination-ul">
           <li><a href="#"><i class="fa-solid fa-chevron-left"></i></a></li>
           <li v-for="num in 5"><a href="#">{{num}}</a></li>
           <li><a href="#"><i class="fa-solid fa-chevron-right"></i></a></li>
       </ul>
   </div>
   `,
  })

   Vue.component('my-resume_sample', {
      
       data() {
           return {
               count: 0,
               resume_sample: [],
               imgURL:'',
               isPopup: false,
               like_count:0,
               Student_id:0,
               categorys: ['全部', '設計', '工程', '管理', '媒體', '銷售', '金融', '行政', '科技', '服務'],
               current:'全部',
           }
       },
       methods: {
           open(imgurl) {
               this.imgURL = imgurl                    
               this.isPopup = true
               console.log( this.imgURL)
           },
           close() {
               this.isPopup = false
           },
           clickLike(likeCount,sId){
               fetch(`./php/updateResume.php?Student_id=${sId}&like_count=${likeCount}`)
               .then(rsp => rsp.json())
               .then(like_count => {
                   this.resume_sample = like_count;
               })
           },
           clickCategory(category){
               this.current = category;
               fetch(`./php/getResume_sample_All.php?category=${category}`)
               .then(rsp => rsp.json())
               .then(updateResume_sample => {
                   this.resume_sample = updateResume_sample;
               })
           }
          
       },
       mounted() {
           
           fetch('./php/getResume_sample_All.php')
               .then(rsp => rsp.json())
               .then(resume_sample => {
                   this.resume_sample = resume_sample;
                   // console.log(resume_sample)
               })

       },
       template:
           `   
           <div>
               <div class="row category">
                   <div v-for="category in categorys" class="col-1">
                       <button class="btna13" @click="clickCategory(category)" :class="{'categoryBtn':current === category}">{{category}}</button>
                   </div>
               </div>
               <div class="row resume_sample_row">         
                   <div class="col" v-for="resume in resume_sample">
                       <div class="resume_card">
                           <img :src='resume.IMG_PATH' class="" alt="resume_1">
                           <div class="card_body">
                               <div class="row">
                                   <div class="col-2"><button @click="clickLike(resume.LIKE_COUNT+=1,resume.STUDENT_ID)" class="fa-solid fa-heart"></button></div>
                                   <div class="col-1 align-self-center"><span>{{resume.LIKE_COUNT}}</span></div>
                                   <div class="offset-7 col-1">
                                       <button class="resume_zoom_btn" @click="open(resume.IMG_PATH)" >
                                           <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                               fill="currentColor" class="bi bi-box-arrow-up-right"
                                               viewBox="0 0 16 16">
                                               <path fill-rule="evenodd"
                                                   d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z" />
                                               <path fill-rule="evenodd"
                                                   d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z" />
                                           </svg>
                                       </button>
                                   </div>
                                   
                               </div>
                           </div>
                       </div>
                   </div>
                   <div v-if="isPopup">
                       <div class="m-a-s-k" @click="close"></div>
                       <div class="resume_zoom">
                           <button class=""><i class="fa-solid fa-xmark" @click="close"></i></button>
                           <img :src="imgURL">
                       </div>
                   </div>
               </div>
           </div>
           `
   })

   
   new Vue({
       el: '#resume',
       data: {
          

       },
       methods: {
          checkMember(e){
           // e.preventDefault()
           const StudentId = sessionStorage.getItem('StudentTd')
           
           if(StudentId != null){
               location.href = './resume_work_space.html'
           }else{
               let ckeck = confirm("請先登入會員")
               
               if(ckeck == true){
                   location.href = './student_login.html'
               }else{

               }
               
           }
          }
           
       },

   })




